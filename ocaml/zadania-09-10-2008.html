<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<title>Programowanie funkcyjne</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
</head>
<body>
<table class="layout">
<tbody><tr>
<td>
<table class="menu">
<tbody>
</tbody>
</table>
</td>
</tr>
<tr>
<td>
<table class="list">
<tbody><tr>
<th colspan="2">Lista nr 1 (09.10.2008) 
</th>
</tr> 
</tbody>
</table>
</td>
</tr>
<tr>
<td>
<table class="list">
<tbody><tr>
<th>Czê¶æ I
</th>
</tr>
<tr>
<td>
<h3>Zadanie 1 (1p.)</h3>
<ul>
<li>
Dla ka¿dego z
typów <tt>int</tt>, <tt>float</tt>, <tt>char</tt>, <tt>string</tt>,
<tt>bool</tt> oraz <tt>unit</tt> napisz wyra¿enie tego typu i
wykorzystaj ewaluator OCamla (program <tt>ocaml</tt>, z linii poleceñ
lub zintegrowany z emacsem) do obliczenia jego warto¶ci.
</li>
<li>
Skompiluj (i wykonaj) <a href="http://www.ii.uni.wroc.pl/%7Emabi/progfun/hello.ml">przyk³adowy program</a> za
pomoc± kompilatorów <tt>ocamlc</tt> i <tt>ocamlopt</tt>
(cf. <a href="http://caml.inria.fr/pub/docs/manual-ocaml/index.html">Ocaml
Manual, Part III</a>).
</li>
</ul>
</td>
</tr>
<br>
<tr>
<td>
<h3>Zadanie 2 (1p.)</h3>
Czy nastêpuj±ce wyra¿enia s± dobrze typowane? Sprawd¼ ich typy i
warto¶ci w ewaluatorze.
<ul>
<li><tt>if true then 4 else 5</tt></li>
<li><tt>if false then 1 else 3.5</tt></li>
<li><tt>false || "ab"&gt;"cd"</tt></li>
<li><tt>if true then ()</tt></li>
<li><tt>if false then () else 4</tt></li>
<li><tt>let x = 2 in x^"aa"</tt></li>
<li><tt>let y = "abc" in y^y</tt></li>
<li><tt>(fun x -&gt; x.[1]) "abcdef"</tt></li>
<li><tt>(fun x -&gt; x) true</tt></li>
<li><tt>let x = [1;2] in x@x</tt></li>
<li><tt>let rec f f = f+f in f 42</tt></li>
</ul>
</td>
</tr>
<tr>
<td>
<h3>Zadanie 3 (1p.)</h3>
Zidentyfikuj zmienne wolne i zwi±zane w wyra¿eniach:
<ul>
<li><tt>let x = x in x^x</tt></li>
<li><tt>let x = 10. in let y = x**2. in y*.x</tt></li>
<li><tt>let x = 1 and y = x in x + y</tt></li>
<li><tt>let x = 1 in fun y z -&gt; x*y*z</tt></li>
</ul>
</td>
</tr>
<tr>
<td>
<h3>Zadanie 4 (1p.)</h3> 
Anonimow± funkcjê dodawania dwóch liczb ca³kowitych mo¿emy zapisaæ za
pomoc± wyra¿enia <tt>fun x y -&gt; x + y</tt>. Zdefiniuj tê funkcjê
nadaj±c jej identyfikator <tt>plus</tt> na 3 ró¿ne (sk³adniowo)
sposoby. Nastêpnie korzystaj±c z jednej z tych definicji napisz
funkcjê <tt>plus_3</tt> dodawania 3 do dowolnej liczby ca³kowitej.
<br><br>
</td>
</tr>
<tr>
<td>
<h3>Zadanie 5 (1p.)</h3> 
Jaki jest typ wyra¿enia <tt>fun x -&gt; x</tt>? Napisz wyra¿enie
anonimowe reprezentuj±ce funkcjê identyczno¶ciow±, którego typem
w OCamlu jest typ <tt>int -&gt; int</tt>.
<br>
Napisz wyra¿enia typów <tt>('a -&gt; 'b) -&gt; ('c -&gt; 'a) -&gt; 'c -&gt; 'b</tt>
oraz <tt>'a -&gt; 'b</tt>.
<br><br>
</td>
</tr>
<tr>
<td>
<h3>Zadanie 6 (1p.)</h3> 
Napisz funkcjê definiuj±c± z³o¿enie dwóch funkcji oraz funkcjê iterowania
wywo³ania funkcji wykorzystuj±c± funkcjê z³o¿enia. Za pomoc± iteracji
zdefiniuj mno¿enie i potêgowanie.
<br><br>
</td>
</tr>
</tbody></table>
</td>
</tr>
<tr>
<td>
<table class="list">
<tbody><tr>
<th colspan="2">Czê¶æ II
</th>
</tr>
<tr>
<td>
<h3>Zadanie 7 (6p.)</h3> 
Strumieñ (tj. nieskoñczony ci±g) liczb ca³kowitych
mo¿emy reprezentowaæ za pomoc± funkcji typu <tt>int -&gt; int</tt> w taki
sposób, ¿e dla dowolnej takiej funkcji <tt>s</tt>, <tt>s 0</tt>
oznacza pierwszy element strumienia, <tt>s 1</tt> nastêpny, itd.
<br>
U¿ywaj±c powy¿szej reprezentacji zdefiniuj nastêpuj±ce funkcje na
strumieniach (funkcje te powinny byæ polimorficzne, tj. powinny
dzia³aæ na strumieniach o dowolnych elementach):
<ul>
<li><tt>hd, tl</tt> - funkcje zwracaj±ce odpowiednio g³owê i ogon strumienia</li>
<li><tt>add</tt> - funkcja dodawania zadanej sta³ej do ka¿dego
  elementu strumienia i zwracaj±ca powsta³y w ten sposób strumieñ</li>
<li><tt>map</tt> - funkcja, która dla zadanej operacji 1-argumentowej
  przetwarza elementy zadanego strumienia za pomoc± tej operacji i
  zwraca powsta³y w ten sposób nowy strumieñ (tak, jak <tt>map</tt> na
  listach skoñczonych)</li>
<li><tt>map2</tt> - jak wy¿ej, ale dla zadanych: funkcji 2-argumentowej
i 2 strumieni</li>
<li><tt>replace</tt> - funkcja, która dla zadanego indeksu <tt>n</tt>,
warto¶ci <tt>a</tt> i strumienia
<tt>s</tt> zastêpuje co <tt>n</tt>-ty element strumienia <tt>s</tt>
przez warto¶æ <tt>a</tt> i zwraca powsta³y w ten sposób strumieñ</li>
<li><tt>take</tt> - funkcja, która dla zadanego indeksu <tt>n</tt> i
strumienia <tt>s</tt> tworzy nowy strumieñ z³o¿ony z
co <tt>n</tt>-tego elementu strumienia <tt>s</tt></li>
<li><tt>fold</tt> - funkcja, która dla zadanej
  funkcji <tt>f:'a-&gt;'b-&gt;'a</tt>, warto¶ci pocz±tkowej <tt>a:'a</tt> i
  strumienia <tt>s</tt> elementów typu <tt>'b</tt> tworzy nowy
  strumieñ, którego ka¿dy element jest wynikiem "zwiniêcia"
  pocz±tkowego segmentu strumienia <tt>s</tt> a¿ do bie¿±cego elementu
  w³±cznie za pomoc± funkcji <tt>f</tt>, tj. w strumieniu wynikowym
  element o indeksie <tt>n</tt> ma warto¶æ <tt>(... (f (f a s_0)
  s_1)... s_n)</tt>
  </li>
<li><tt>tabulate</tt> - funkcja tablicowania strumienia, której
  warto¶ci± powinna byæ lista elementów strumienia le¿±ca w zadanym
  zakresie indeksów</li>
</ul>
Zdefiniuj przyk³adowe strumienie i przetestuj implementacjê.
<br>
W definicji funkcji <tt>table</tt> wykorzystaj mo¿liwo¶æ definiowania
parametrów opcjonalnych dla funkcji (niech pocz±tek zakresu indeksów
bêdzie opcjonalny i domy¶lnie równy 0).
<br>
<b>Przyk³ad.</b>
Pisz±c <tt>let f ?(x=0) y = x + y</tt> deklarujemy, ¿e pierwszy
argument funkcji <tt>f</tt> o etykiecie <tt>x</tt> jest opcjonalny, a jego
warto¶æ domy¶lna wynosi 0. Funkcjê <tt>f</tt> mo¿na zatem wywo³aæ za
pomoc± wyra¿enia <tt>f 3</tt> (= 3) lub jawnie podaj±c warto¶æ
parametru opcjonalnego, za pomoc± sk³adni <tt>f ~x:42 3</tt> (= 45).  
</td>
</tr>
</tbody></table>
</td>
</tr>
</tbody></table>
</body></html>